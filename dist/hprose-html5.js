// Hprose for HTML5 v2.0.0
// Copyright (c) 2008-2015 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-html5
(function($){"use strict";$.hprose=Object.create(null)}(function(){return this||(1,eval)("this")}()));function TimeoutError($){Error.call(this);this.message=$;this.name=TimeoutError.name;if(typeof Error.captureStackTrace==="function")Error.captureStackTrace(this,TimeoutError)}TimeoutError.prototype=Object.create(Error.prototype);TimeoutError.prototype.constructor=TimeoutError;(function(B,D){"use strict";var A=(B.navigator&&/Trident/.test(B.navigator.userAgent));if(!A&&(B.msSetImmediate||B.setImmediate)){if(!B.setImmediate){B.setImmediate=B.msSetImmediate;B.clearImmediate=B.msClearImmediate}return}var G=B.document,F=Function.prototype.call.bind(Array.prototype.slice),J=Function.prototype.call.bind(Object.prototype.toString),$={},E=1,N={},H=false;function L(_){var $=F(arguments,1);return function(){_.apply(D,$)}}function C(A){if(H)B.setTimeout(L(C,A),0);else{var $=N[A];if($){H=true;try{$()}finally{_(A);H=false}}}}function I($){N[E]=L.apply(D,$);return E++}function _($){delete N[$]}$.messageChannel=function(){var $=new B.MessageChannel();$.port1.onmessage=function($){C(Number($.data))};return function(){var _=I(arguments);$.port2.postMessage(_);return _}};$.nextTick=function(){return function(){var $=I(arguments);B.process.nextTick(L(C,$));return $}};$.postMessage=function(){var $="setImmediate$"+Math.random()+"$",_=function(_){if(_.source===B&&typeof(_.data)==="string"&&_.data.indexOf($)===0)C(Number(_.data.slice($.length)))};if(B.addEventListener)B.addEventListener("message",_,false);else B.attachEvent("onmessage",_);return function(){var _=I(arguments);B.postMessage($+_,"*");return _}};$.readyStateChange=function(){var $=G.documentElement;return function(){var _=I(arguments),A=G.createElement("script");A.onreadystatechange=function(){C(_);A.onreadystatechange=null;$.removeChild(A);A=null};$.appendChild(A);return _}};$.setTimeout=function(){return function(){var $=I(arguments);B.setTimeout(L(C,$),0);return $}};function M(){if(B.postMessage&&!B.importScripts){var _=true,$=B.onmessage;B.onmessage=function(){_=false};B.postMessage("","*");B.onmessage=$;return _}}var K=Object.getPrototypeOf&&Object.getPrototypeOf(B);K=(K&&K.setTimeout?K:B);if(A)K.setImmediate=$.setTimeout();else if(J(B.process)==="[object process]")K.setImmediate=$.nextTick();else if(M())K.setImmediate=$.postMessage();else if(B.MessageChannel)K.setImmediate=$.messageChannel();else if(G&&("onreadystatechange"in G.createElement("script")))K.setImmediate=$.readyStateChange();else K.setImmediate=$.setTimeout();K.msSetImmediate=K.setImmediate;K.clearImmediate=_;K.msClearImmediate=_}(function(){return this||(1,eval)("this")}()));(function(B,H){"use strict";var c=0,I=1,V=2,L="Promise"in B;var a=B.setImmediate,h=B.setTimeout,O=B.clearTimeout,J=Function.prototype.call.bind(Array.prototype.forEach),M=Function.prototype.call.bind(Array.prototype.slice);function P(C,$,B){try{var _=C(B);$.resolve(_)}catch(A){$.reject(A)}}function N(A,$,_){a(function(){try{var B=A(_);$.resolve(B)}catch(C){$.reject(C)}})}function i(_){var $=!!_;Object.defineProperties(this,{_subscribers:{value:[]},_sync:{value:$},_call:{value:$?P:N},resolve:{value:this.resolve.bind(this)},reject:{value:this.reject.bind(this)},});if(typeof _==="function")a(function(){try{this.resolve(_())}catch($){this.reject($)}})}function f($){return $ instanceof i}function K($){return f($)||(L&&($ instanceof B.Promise)&&(typeof($.then==="function")))}function C($,A){var B=(typeof A==="function")?A:function(){return A},_=new i();h(function(){try{_.resolve(B())}catch($){_.reject($)}},$);return _}function F($){var _=new i();_.reject($);return _}function d(A){var _=new i(true);try{_.resolve(A())}catch($){_.reject($)}return _}function S($){var _=new i(true);_.resolve($);return _}function D($){var _=new i();$(_.resolve,_.reject);return _}function _(_){var $=0;J(_,function(){++$});return $}function W($,A){$=K($)?$:S($);return $.then(function(B){var E=B.length,D=_(B),$=new Array(E);if(D===0)return S($);var C=new i(A);J(B,function(B,A){var _=(K(B)?B:S(B));_.then(function(_){$[A]=_;if(--D===0)C.resolve($)},C.reject)});return C})}function Q(){return W(arguments)}function Y($,_){$=K($)?$:S($);return $.then(function($){var A=new i(_);J($,function(_){var $=(K(_)?_:S(_));$.then(A.resolve,A.reject)});return A})}function e($,A){$=K($)?$:S($);return $.then(function(B){var E=B.length,D=_(B);if(D===0)throw new RangeError("any(): array must not be empty");var $=new Array(E),C=new i(A);J(B,function(B,A){var _=(K(B)?B:S(B));_.then(C.resolve,function(_){$[A]=_;if(--D===0)C.reject($)})});return C})}function A($,A){$=K($)?$:S($);return $.then(function(B){var E=B.length,D=_(B),$=new Array(E);if(D===0)return S($);var C=new i(A);J(B,function(B,A){var _=(K(B)?B:S(B));_.whenComplete(function(){$[A]=_.inspect();if(--D===0)C.resolve($)})});return C})}function G(_){var $=M(arguments,1);return W($,true).then(function($){return _.apply(H,$)})}function E(_,A){var $=M(arguments,2);return W($,true).then(function($){return _.apply(A,$)})}function j($,_){return function(){return W(arguments,true).then(function(A){return $.apply(_,A)})}}function Z($,_,A){return W($,true).then(function($){return $.forEach(_,A)})}function T($,_,A){return W($,true).then(function($){return $.every(_,A)})}function $($,_,A){return W($,true).then(function($){return $.some(_,A)})}function g($,_,A){return W($,true).then(function($){return $.filter(_,A)})}function U($,_,A){return W($,true).then(function($){return $.map(_,A)})}function X($,_,A){return W($,true).then(function($){return $.reduce(_,A)})}function R($,_,A){return W($,true).then(function($){return $.reduceRight(_,A)})}Object.defineProperties(i,{delayed:{value:C},error:{value:F},sync:{value:d},value:{value:S},all:{value:W},race:{value:Y},resolve:{value:S},reject:{value:F},promise:{value:D},isFuture:{value:f},isPromise:{value:K},join:{value:Q},any:{value:e},settle:{value:A},attempt:{value:G},run:{value:E},wrap:{value:j},forEach:{value:Z},every:{value:T},some:{value:$},filter:{value:g},map:{value:U},reduce:{value:X},reduceRight:{value:R}});Object.defineProperties(i.prototype,{_value:{writable:true},_reason:{writable:true},_state:{value:c,writable:true},_resolve:{value:function($,C,_,D){if(K(D)){if(D===this)throw new TypeError("Self resolution");D.then($,C).then(_.resolve,_.reject);return}if((D!==null)&&(typeof D==="object")||(typeof D==="function")){var E;try{E=D.then}catch(A){if(C)this._call(C,_,A);else _.reject(A);return}if(typeof E==="function"){try{var B=E.call(D,$,C);B.then(_.resolve,_.reject)}catch(A){_.reject(A)}return}}if($)this._call($,_,D);else _.resolve(D)}},resolve:{value:function(A){if(this._state===c){this._state=I;this._value=A;var _=this._subscribers;while(_.length>0){var $=_.shift();this._resolve($.onfulfill,$.onreject,$.next,A)}}}},reject:{value:function($){if(this._state===c){this._state=V;this._reason=$;var A=this._subscribers;while(A.length>0){var _=A.shift();if(_.onreject)this._call(_.onreject,_.next,$);else _.next.reject($)}}}},then:{value:function($,A){if(typeof $!=="function")$=null;if(typeof A!=="function")A=null;if($||A){var _=new i(this._sync);if(this._state===I){if($)this._resolve($,A,_,this._value);else _.resolve(this._value)}else if(this._state===V){if(A)this._call(A,_,this._reason);else _.reject(this._reason)}else this._subscribers.push({onfulfill:$,onreject:A,next:_});return _}return this}},inspect:{value:function(){switch(this._state){case c:return{state:"pending"};case I:return{state:"fulfilled",value:this._value};case V:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(_,$){if(typeof $==="function"){var A=this;return this["catch"](function(B){return($(B)?A["catch"](_):A)})}return this["catch"](_)}},"catch":{value:function($){return this.then(null,$)}},whenComplete:{value:function($){return this.then(function(_){var A=$();if(A===H)return _;A=K(A)?A:S(A);return A.then(function(){return _})},function(_){var A=$();if(A===H)throw _;A=K(A)?A:S(A);return A.then(function(){throw _})})}},timeout:{value:function($,_){var A=new i(),B=h(function(){A.reject(_||new TimeoutError("timeout"))},$);this.whenComplete(function(){O(B)}).then(A.resolve,A.reject);return A}},delay:{value:function($){var _=new i();this.then(function(A){h(function(){_.resolve(A)},$)},_.reject);return _}},tap:{value:function($,_){return this.then(function(A){$.call(_,A);return A})}},spread:{value:function($,_){return this.then(function(A){return $.apply(_,A)})}},get:{value:function($){return this.then(function(_){return _[$]})}},set:{value:function(_,$){return this.then(function(A){A[_]=$;return A})}},apply:{value:function(_,$){$=$||[];return this.then(function(A){return W($,true).then(function($){return A[_].apply(A,$)})})}},call:{value:function(_){var $=M(arguments,1);return this.then(function(A){return W($,true).then(function($){return A[_].apply(A,$)})})}},bind:{value:function($){var C=M(arguments);if(Array.isArray($))for(var _=0,B=$.length;_<B;++_){C[0]=$[_];this.bind.apply(this,C)}C.shift();var A=this;Object.defineProperty(this,$,{value:function(){var _=M(arguments);return A.then(function(A){return W(C.concat(_),true).then(function(_){return A[$].apply(A,_)})})}});return this}},forEach:{value:function($,_){return Z(this,$,_)}},every:{value:function($,_){return T(this,$,_)}},some:{value:function(_,A){return $(this,_,A)}},filter:{value:function($,_){return g(this,$,_)}},map:{value:function($,_){return U(this,$,_)}},reduce:{value:function($,_){return X(this,$,_)}},reduceRight:{value:function($,_){return R(this,$,_)}}});B.hprose.Future=i;function b(_){var $=new i(_);Object.defineProperties(this,{future:{value:$},complete:{value:$.resolve},completeError:{value:$.reject},isCompleted:{get:function(){return($._state!==c)}}})}Object.defineProperties(b,{sync:{value:function(){return new b(true)}}});B.hprose.Completer=b;if(L)return;B.Promise=function($){i.call(this);$(this.resolve,this.reject)};B.Promise.prototype=Object.create(i.prototype);B.Promise.prototype.constructor=i;Object.defineProperties(B.Promise,{all:{value:W},race:{value:Y},resolve:{value:S},reject:{value:F}})}(function(){return this||(1,eval)("this")}()));(function(F){"use strict";var _="WeakMap"in F;var B="Map"in F;var $=true;if(B)$="forEach"in new F.Map();if(_&&B&&$)return;var K=Object.create(null),D=0,C=function(_){var $=Object.create(null),A=_.valueOf;Object.defineProperty(_,"valueOf",{value:function(B,C){if((this===_)&&(C in K)&&(K[C]===B)){if(!(C in $))$[C]=Object.create(null);return $[C]}else return A.apply(this,arguments)},writable:true,configurable:true,enumerable:false})};if(!_)F.WeakMap=function A(){var _=Object.create(null),H=D++;K[H]=_;var F=function(A){if(A!==Object(A))throw new Error("value is not a non-null object");var $=A.valueOf(_,H);if($!==A.valueOf())return $;C(A);return A.valueOf(_,H)},G=Object.create(A.prototype,{get:{value:function($){return F($).value}},set:{value:function(_,$){F(_).value=$}},has:{value:function($){return"value"in F($)}},"delete":{value:function($){return delete F($).value}},clear:{value:function(){delete K[H];H=D++;K[H]=_}}});if(arguments.length>0&&Array.isArray(arguments[0])){var B=arguments[0];for(var E=0,$=B.length;E<$;E++)G.set(B[E][0],B[E][1])}return G};if(!B){var G=function(){var $=Object.create(null),B=D++,_=Object.create(null);K[B]=$;var A=function(D){if(D===null)return _;var A=D.valueOf($,B);if(A!==D.valueOf())return A;C(D);return D.valueOf($,B)};return{get:function($){return A($).value},set:function(_,$){A(_).value=$},has:function($){return"value"in A($)},"delete":function($){return delete A($).value},clear:function(){delete K[B];B=D++;K[B]=$}}},E=function(){var $=Object.create(null);return{get:function(){return $.value},set:function(A,_){$.value=_},has:function(){return"value"in $},"delete":function(){return delete $.value},clear:function(){$=Object.create(null)}}},H=function(){var $=Object.create(null);return{get:function(_){return $[_]},set:function(A,_){$[A]=_},has:function(_){return _ in $},"delete":function(_){return delete $[_]},clear:function(){$=Object.create(null)}}};F.Map=function J(){var D={"number":H(),"string":H(),"boolean":H(),"object":G(),"function":G(),"unknown":G(),"undefined":E(),"null":E()},$=0,A=[],F=Object.create(J.prototype,{size:{get:function(){return $}},get:{value:function($){return D[typeof($)].get($)}},set:{value:function(B,_){if(!this.has(B)){A.push(B);$++}D[typeof(B)].set(B,_)}},has:{value:function($){return D[typeof($)].has($)}},"delete":{value:function(_){if(this.has(_)){$--;A.splice(A.indexOf(_),1);return D[typeof(_)]["delete"](_)}return false}},clear:{value:function(){A.length=0;for(var _ in D)D[_].clear();$=0}},forEach:{value:function($,C){for(var _=0,B=A.length;_<B;_++)$.call(C,this.get(A[_]),A[_],this)}}});if(arguments.length>0&&Array.isArray(arguments[0])){var B=arguments[0];for(var C=0,_=B.length;C<_;C++)F.set(B[C][0],B[C][1])}return F}}if(!$){var I=F.Map;F.Map=function J(){var D=new I(),$=0,A=[],E=Object.create(J.prototype,{size:{get:function(){return $}},get:{value:function($){return D.get($)}},set:{value:function(B,_){if(!D.has(B)){A.push(B);$++}D.set(B,_)}},has:{value:function($){return D.has($)}},"delete":{value:function(_){if(D.has(_)){$--;A.splice(A.indexOf(_),1);return D["delete"](_)}return false}},clear:{value:function(){if("clear"in D)D.clear();else for(var _=0,B=A.length;_<B;_++)D["delete"](A[_]);A.length=0;$=0}},forEach:{value:function($,C){for(var _=0,B=A.length;_<B;_++)$.call(C,this.get(A[_]),A[_],this)}}});if(arguments.length>0&&Array.isArray(arguments[0])){var B=arguments[0];for(var C=0,_=B.length;C<_;C++)E.set(B[C][0],B[C][1])}return E}}}(function(){return this||(1,eval)("this")}()));(function($){"use strict";$.hprose.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3};$.hprose.Normal=$.hprose.ResultMode.Normal;$.hprose.Serialized=$.hprose.ResultMode.Serialized;$.hprose.Raw=$.hprose.ResultMode.Raw;$.hprose.RawWithEndTag=$.hprose.ResultMode.RawWithEndTag}(function(){return this||(1,eval)("this")}()));(function($){"use strict";$.hprose.Tags={TagInteger:105,TagLong:108,TagDouble:100,TagNull:110,TagEmpty:101,TagTrue:116,TagFalse:102,TagNaN:78,TagInfinity:73,TagDate:68,TagTime:84,TagUTC:90,TagBytes:98,TagUTF8Char:117,TagString:115,TagGuid:103,TagList:97,TagMap:109,TagClass:99,TagObject:111,TagRef:114,TagPos:43,TagNeg:45,TagSemicolon:59,TagOpenbrace:123,TagClosebrace:125,TagQuote:34,TagPoint:46,TagFunctions:70,TagCall:67,TagResult:82,TagArgument:65,TagError:69,TagEnd:122}}(function(){return this||(1,eval)("this")}()));(function(C,I){"use strict";var $=new Uint8Array(0),H=1024,F=Function.prototype.call.bind(Array.prototype.indexOf);function A(_,$,A){_[$++]=A>>>24&255;_[$++]=A>>>16&255;_[$++]=A>>>8&255;_[$++]=A&255;return $}function G(B,$,_){var E=_.length;for(var C=0;C<E;++C){var A=_.charCodeAt(C);if(A<128)B[$++]=A;else if(A<2048){B[$++]=192|(A>>6);B[$++]=128|(A&63)}else if(A<55296||A>57343){B[$++]=224|(A>>12);B[$++]=128|((A>>6)&63);B[$++]=128|(A&63)}else{if(C+1<E){var D=_.codeUnitAt(C+1);if(A<56320&&56320<=D&&D<=57343){var F=(((A&56320)<<10)|(D&1023))+65536;B[$++]=240|((F>>18)&63);B[$++]=128|((F>>12)&63);B[$++]=128|((F>>6)&63);B[$++]=128|(F&63);++C;continue}}throw new Error("Malformed string")}}return $}function B(A,D){if(D===I)D=A.length;if(D===0)return["",0];var C=new Uint16Array(D),B=0,E=0;for(var _=A.length;B<D&&E<_;B++){var $=A[E++];switch($>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:C[B]=$;break;case 12:case 13:if(E<_)C[B]=(($&31)<<6)|(A[E++]&63);else throw new Error("Unfinished UTF-8 octet sequence");break;case 14:if(E+1<_)C[B]=(($&15)<<12)|((A[E++]&63)<<6)|(A[E++]&63);else throw new Error("Unfinished UTF-8 octet sequence");break;case 15:if(E+2<_){var F=(($&7)<<18)|((A[E++]&63)<<12)|((A[E++]&63)<<6)|(A[E++]&63)-65536;if(0<=F&&F<=1048575){C[B++]=(((F>>10)&1023)|55296);C[B]=((F&1023)|56320)}else throw new Error("Character outside valid Unicode range: 0x"+F.toString(16))}else throw new Error("Unfinished UTF-8 octet sequence");break;default:throw new Error("Bad UTF-8 encoding 0x"+$.toString(16))}}if(B<D)C=C.subarray(0,B);return[String.fromCharCode.apply(String,C),E]}function D($){--$;$|=$>>1;$|=$>>2;$|=$>>4;$|=$>>8;$|=$>>16;return $+1}function _(){var $=arguments;switch($.length){case 1:switch($[0].constructor){case Uint8Array:this._bytes=$[0];this._length=$[0].length;break;case _:this._bytes=$[0].toBytes();this._length=$[0].length;break;case String:this.writeString($[0]);break;default:this._bytes=new Uint8Array($[0]);this._length=this._bytes.length;break}break;case 2:this._bytes=new Uint8Array($[0],$[1]);this._length=$[1];break;case 3:this._bytes=new Uint8Array($[0],$[1],$[2]);this._length=$[2];break}this.mark()}Object.defineProperties(_.prototype,{_bytes:{value:null,writable:true},_length:{value:0,writable:true},_wmark:{value:0,writable:true},_off:{value:0,writable:true},_rmark:{value:0,writable:true},_grow:{value:function(B){var A=this._bytes,C=this._length+B,_=D(C);if(A){_*=2;if(_>A.length){var $=new Uint8Array(_);$.set(A);this._bytes=$}}else{_=Math.max(_,H);this._bytes=new Uint8Array(_)}}},length:{get:function(){return this._length}},capacity:{get:function(){return this._bytes?this._bytes.length:0}},position:{get:function(){return this._off}},bytes:{get:function(){return(this._bytes===null)?$:this._bytes.subarray(0,this._length)}},mark:{value:function(){this._wmark=this._length;this._rmark=this._off}},reset:{value:function(){this._length=this._wmark;this._off=this._rmark}},clear:{value:function(){this._bytes=null;this._length=0;this._wmark=0;this._off=0;this._rmark=0}},writeByte:{value:function($){this._grow(1);this._bytes[this._length++]=$}},writeInt32BE:{value:function($){if(($===($|0))&&($<=2147483647)){this._grow(4);this._length=A(this._bytes,this._length,$);return}throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function($){if(($===($|0))&&($>=0)){this._grow(4);this._length=A(this._bytes,this._length,$);return}throw new TypeError("value is out of bounds")}},write:{value:function($){var D=$.byteLength||$.length;if(D===0)return;this._grow(D);var A=this._bytes,B=this._length;switch($.constructor){case ArrayBuffer:A.set(new Uint8Array($),B);break;case Uint8Array:A.set($,B);break;case _:A.set($.toBytes(),B);break;default:for(var C=0;C<D;C++)A[B+C]=$[C];break}this._length+=D}},writeAsciiString:{value:function($){var C=$.length;if(C===0)return;this._grow(C);var _=this._bytes,B=this._length;for(var A=0;A<C;++A,++B)_[B]=$.charCodeAt(A);this._length=B}},writeString:{value:function($){var _=$.length;if(_===0)return;this._grow(_*3);this._length=G(this._bytes,this._length,$)}},readByte:{value:function(){if(this._off<this._length)return this._bytes[this._off++];return-1}},readInt32BE:{value:function(){var _=this._bytes,A=this._off;if(A+3<this._length){var $=_[A++]<<24|_[A++]<<16|_[A++]<<8|_[A++];this._off=A;return $}throw new Error("EOF")}},readUInt32BE:{value:function(){var $=this.readInt32BE();if($<0)return($&2147483647)+2147483648;return $}},read:{value:function(_){if(this._off+_>this._length)_=this._length-this._off;if(_===0)return $;return new Uint8Array(this._bytes.subarray(this._off,this._off+=_))}},skip:{value:function($){if(this._off+$>this._length){$=this._length-this._off;this._off=this._length}else this._off+=$;return $}},readBytes:{value:function(A){var _=F(this._bytes,A,this._off),$;if(_===-1){$=this._bytes.subarray(this._off,this._length);this._off=this._length}else{$=this._bytes.subarray(this._off,_+1);this._off=_+1}return $}},readUntil:{value:function(A){var _=F(this._bytes,A,this._off),$="";if(_===this._off)this._off++;else if(_===-1){$=B(this._bytes.subarray(this._off,this._length))[0];this._off=this._length}else{$=B(this._bytes.subarray(this._off,_))[0];this._off=_+1}return $}},readAsciiString:{value:function(_){if(this._off+_>this._length)_=this._length-this._off;if(_===0)return"";var $=this._bytes.subarray(this._off,this._off+=_);return String.fromCharCode.apply(String,$)}},readString:{value:function(_){var $=B(this._bytes.subarray(this._off,this._length),_);this._off+=$[1];return $[0]}},takeBytes:{value:function(){var $=this.bytes;this.clear();return $}},toBytes:{value:function(){return new Uint8Array(this.bytes)}},toString:{value:function(){return B(this.bytes,this._length)[0]}},clone:{value:function(){return new _(this.toBytes())}},trunc:{value:function(){this._bytes=this._bytes.subarray(this._off,this._length);this._length=this._bytes.length;this._off=0;this._wmark=0;this._rmark=0}}});function E($){if($.length===0)return"";switch($.constructor){case String:return $;case _:$=$.bytes;case ArrayBuffer:$=new Uint8Array($);case Uint8Array:return B($,$.length)[0];default:return String.fromCharCode.apply(String,$)}}Object.defineProperty(_,"toString",{value:E});C.hprose.BytesIO=_}(function(){return this||(1,eval)("this")}()));(function(D){"use strict";var _=D.WeakMap,A=Object.create(null),C=new _();function E(_,$){C.set(_,$);A[$]=_}function B($){return C.get($)}function $($){return A[$]}D.hprose.ClassManager=Object.create(null,{register:{value:E},getClassAlias:{value:B},getClass:{value:$}});D.hprose.register=E;E(Object,"Object")}(function(){return this||(1,eval)("this")}()));(function(A,D){"use strict";var W=A.Map,F=A.hprose.BytesIO,H=A.hprose.Tags,$=A.hprose.ClassManager;function V(A){var C=A.constructor,_=$.getClassAlias(C);if(_)return _;if(C.name)_=C.name;else{var B=C.toString();_=B.substr(0,B.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/ig,"");if(_===""||_==="Object")return(typeof(A.getClassName)==="function")?A.getClassName():"Object"}if(_!=="Object")$.register(C,_);return _}var J=Object.create(null,{set:{value:function(){}},write:{value:function(){return false}},reset:{value:function(){}}});function G($){Object.defineProperties(this,{_stream:{value:$},_ref:{value:new W(),writable:true}})}Object.defineProperties(G.prototype,{_refcount:{value:0,writable:true},set:{value:function($){this._ref.set($,this._refcount++)}},write:{value:function($){var _=this._ref.get($);if(_!==D){this._stream.writeByte(H.TagRef);this._stream.writeString(""+_);this._stream.writeByte(H.TagSemicolon);return true}return false}},reset:{value:function(){this._ref=new W();this._refcount=0}}});function O($){return new G($)}function Y($,_){Object.defineProperties(this,{stream:{value:$},_classref:{value:Object.create(null),writable:true},_fieldsref:{value:[],writable:true},_refer:{value:_?J:O($)}})}function R(A,B){var _=A.stream;if(B===D||B===null){_.writeByte(H.TagNull);return}switch(B.constructor){case Function:_.writeByte(H.TagNull);return;case Number:T(A,B);return;case Boolean:Z(A,B);return;case String:switch(B.length){case 0:_.writeByte(H.TagEmpty);return;case 1:_.writeByte(H.TagUTF8Char);_.writeString(B);return}A.writeStringWithRef(B);return;case Date:A.writeDateWithRef(B);return;case W:A.writeHarmonyMapWithRef(B);return;case ArrayBuffer:case Uint8Array:case F:A.writeBytesWithRef(B);return;case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:P(A,B);return;case Float32Array:case Float64Array:M(A,B);return;default:if(Array.isArray(B))A.writeListWithRef(B);else{var $=V(B);if($==="Object")A.writeMapWithRef(B);else A.writeObjectWithRef(B)}break}}function T(_,A){var $=_.stream;A=A.valueOf();if(A===(A|0)){if(0<=A&&A<=9)$.writeByte(A+48);else{$.writeByte(H.TagInteger);$.writeAsciiString(""+A);$.writeByte(H.TagSemicolon)}}else if(isNaN(A))$.writeByte(H.TagNaN);else if(isFinite(A)){$.writeByte(H.TagDouble);$.writeAsciiString(""+A);$.writeByte(H.TagSemicolon)}else{$.writeByte(H.TagInfinity);$.writeByte((A>0)?H.TagPos:H.TagNeg)}}function C(_,A){var $=_.stream;if(0<=A&&A<=9)$.writeByte(A+48);else{if(A<-2147483648||A>2147483647)$.writeByte(H.TagLong);else $.writeByte(H.TagInteger);$.writeAsciiString(""+A);$.writeByte(H.TagSemicolon)}}function K(_,A){var $=_.stream;if(isNaN(A))$.writeByte(H.TagNaN);else if(isFinite(A)){$.writeByte(H.TagDouble);$.writeAsciiString(""+A);$.writeByte(H.TagSemicolon)}else{$.writeByte(H.TagInfinity);$.writeByte((A>0)?H.TagPos:H.TagNeg)}}function Z(_,$){_.stream.writeByte($.valueOf()?H.TagTrue:H.TagFalse)}function Q(E,$){E._refer.set($);var B=E.stream,C=("0000"+$.getUTCFullYear()).slice(-4),_=("00"+($.getUTCMonth()+1)).slice(-2),F=("00"+$.getUTCDate()).slice(-2),A=("00"+$.getUTCHours()).slice(-2),G=("00"+$.getUTCMinutes()).slice(-2),I=("00"+$.getUTCSeconds()).slice(-2),D=("000"+$.getUTCMilliseconds()).slice(-3);B.writeByte(H.TagDate);B.writeAsciiString(C+_+F);B.writeByte(H.TagTime);B.writeAsciiString(A+G+I);if(D!=="000"){B.writeByte(H.TagPoint);B.writeAsciiString(D)}B.writeByte(H.TagUTC)}function _(E,$){E._refer.set($);var B=E.stream,C=("0000"+$.getFullYear()).slice(-4),_=("00"+($.getMonth()+1)).slice(-2),F=("00"+$.getDate()).slice(-2),A=("00"+$.getHours()).slice(-2),G=("00"+$.getMinutes()).slice(-2),I=("00"+$.getSeconds()).slice(-2),D=("000"+$.getMilliseconds()).slice(-3);if((A==="00")&&(G==="00")&&(I==="00")&&(D==="000")){B.writeByte(H.TagDate);B.writeAsciiString(C+_+F)}else if((C==="1970")&&(_==="01")&&(F==="01")){B.writeByte(H.TagTime);B.writeAsciiString(A+G+I);if(D!=="000"){B.writeByte(H.TagPoint);B.writeAsciiString(D)}}else{B.writeByte(H.TagDate);B.writeAsciiString(C+_+F);B.writeByte(H.TagTime);B.writeAsciiString(A+G+I);if(D!=="000"){B.writeByte(H.TagPoint);B.writeAsciiString(D)}}B.writeByte(H.TagSemicolon)}function L(B,C){B._refer.set(C);var _=B.stream,$=("00"+C.getHours()).slice(-2),D=("00"+C.getMinutes()).slice(-2),E=("00"+C.getSeconds()).slice(-2),A=("000"+C.getMilliseconds()).slice(-3);_.writeByte(H.TagTime);_.writeAsciiString($+D+E);if(A!=="000"){_.writeByte(H.TagPoint);_.writeAsciiString(A)}_.writeByte(H.TagSemicolon)}function S(A,_){A._refer.set(_);var $=A.stream;$.writeByte(H.TagBytes);var B=_.byteLength||_.length;if(B>0)$.writeAsciiString(""+B);$.writeByte(H.TagQuote);if(B>0)$.write(_);$.writeByte(H.TagQuote)}function X(A,$){A._refer.set($);var _=A.stream,B=$.length;_.writeByte(H.TagString);if(B>0)_.writeAsciiString(""+B);_.writeByte(H.TagQuote);if(B>0)_.writeString($);_.writeByte(H.TagQuote)}function E(C,$,A){C._refer.set($);var _=C.stream,D=$.length;_.writeByte(H.TagList);if(D>0)_.writeAsciiString(""+D);_.writeByte(H.TagOpenbrace);for(var B=0;B<D;B++)A(C,$[B]);_.writeByte(H.TagClosebrace)}function P($,_){if(!$._refer.write(_))E($,_,C)}function M($,_){if(!$._refer.write(_))E($,_,K)}function B(A,C){A._refer.set(C);var $=A.stream,B=[];for(var D in C)if(C.hasOwnProperty(D)&&typeof(C[D])!=="function")B[B.length]=D;var E=B.length;$.writeByte(H.TagMap);if(E>0)$.writeAsciiString(""+E);$.writeByte(H.TagOpenbrace);for(var _=0;_<E;_++){R(A,B[_]);R(A,C[B[_]])}$.writeByte(H.TagClosebrace)}function U(_,A){_._refer.set(A);var $=_.stream,B=A.size;$.writeByte(H.TagMap);if(B>0)$.writeAsciiString(""+B);$.writeByte(H.TagOpenbrace);A.forEach(function($,A){R(_,A);R(_,$)});$.writeByte(H.TagClosebrace)}function N(D,A){var _=D.stream,$=V(A),E,B=D._classref[$];if(B>=0)E=D._fieldsref[B];else{E=[];for(var F in A)if(A.hasOwnProperty(F)&&typeof(A[F])!=="function")E[E.length]=F.toString();B=I(D,$,E)}_.writeByte(H.TagObject);_.writeAsciiString(""+B);_.writeByte(H.TagOpenbrace);D._refer.set(A);var G=E.length;for(var C=0;C<G;C++)R(D,A[E[C]]);_.writeByte(H.TagClosebrace)}function I(C,$,D){var _=C.stream,E=D.length;_.writeByte(H.TagClass);_.writeAsciiString(""+$.length);_.writeByte(H.TagQuote);_.writeString($);_.writeByte(H.TagQuote);if(E>0)_.writeAsciiString(""+E);_.writeByte(H.TagOpenbrace);for(var A=0;A<E;A++)X(C,D[A]);_.writeByte(H.TagClosebrace);var B=C._fieldsref.length;C._classref[$]=B;C._fieldsref[B]=D;return B}Object.defineProperties(Y.prototype,{serialize:{value:function($){R(this,$)}},writeInteger:{value:function($){C(this,$)}},writeDouble:{value:function($){K(this,$)}},writeBoolean:{value:function($){Z(this,$)}},writeUTCDate:{value:function($){Q(this,$)}},writeUTCDateWithRef:{value:function($){if(!this._refer.write($))Q(this,$)}},writeDate:{value:function($){_(this,$)}},writeDateWithRef:{value:function($){if(!this._refer.write($))_(this,$)}},writeTime:{value:function($){L(this,$)}},writeTimeWithRef:{value:function($){if(!this._refer.write($))L(this,$)}},writeBytes:{value:function($){S(this,$)}},writeBytesWithRef:{value:function($){if(!this._refer.write($))S(this,$)}},writeString:{value:function($){X(this,$)}},writeStringWithRef:{value:function($){if(!this._refer.write($))X(this,$)}},writeList:{value:function($){E(this,$,R)}},writeListWithRef:{value:function($){if(!this._refer.write($))E(this,$,R)}},writeMap:{value:function($){B(this,$)}},writeMapWithRef:{value:function($){if(!this._refer.write($))B(this,$)}},writeHarmonyMap:{value:function($){U(this,$)}},writeHarmonyMapWithRef:{value:function($){if(!this._refer.write($))U(this,$)}},writeObject:{value:function($){N(this,$)}},writeObjectWithRef:{value:function($){if(!this._refer.write($))N(this,$)}},reset:{value:function(){this._classref=Object.create(null);this._fieldsref.length=0;this._refer.reset()}}});A.hprose.Writer=Y}(function(){return this||(1,eval)("this")}()));(function(g,i){"use strict";var Z=g.Map,l=g.hprose.BytesIO,S=g.hprose.Tags,$=g.hprose.ClassManager;function n(A,_){if(A&&_){var $="";if(typeof(_)==="number")$=String.fromCharCode(_);else $=String.fromCharCode.apply(String,_);throw new Error("Tag \""+$+"\" expected, but \""+String.fromCharCode(A)+"\" found in stream")}else if(A)throw new Error("Unexpected serialize tag \""+String.fromCharCode(A)+"\" in stream");else throw new Error("No byte found in stream")}function o($){var _=new l();H($,_);return _.bytes}function H($,_){K($,_,$.readByte())}function K($,_,A){_.writeByte(A);switch(A){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case S.TagNull:case S.TagEmpty:case S.TagTrue:case S.TagFalse:case S.TagNaN:break;case S.TagInfinity:_.writeByte($.readByte());break;case S.TagInteger:case S.TagLong:case S.TagDouble:case S.TagRef:Y($,_);break;case S.TagDate:case S.TagTime:G($,_);break;case S.TagUTF8Char:h($,_);break;case S.TagBytes:L($,_);break;case S.TagString:M($,_);break;case S.TagGuid:c($,_);break;case S.TagList:case S.TagMap:case S.TagObject:T($,_);break;case S.TagClass:T($,_);H($,_);break;case S.TagError:H($,_);break;default:n(A)}}function Y($,_){var A;do{A=$.readByte();_.writeByte(A)}while(A!==S.TagSemicolon)}function G($,_){var A;do{A=$.readByte();_.writeByte(A)}while(A!==S.TagSemicolon&&A!==S.TagUTC)}function h($,_){_.writeString($.readString(1))}function L($,_){var A=0,B=48;do{A*=10;A+=B-48;B=$.readByte();_.writeByte(B)}while(B!==S.TagQuote);_.write($.read(A+1))}function M($,_){var A=0,B=48;do{A*=10;A+=B-48;B=$.readByte();_.writeByte(B)}while(B!==S.TagQuote);_.writeString($.readString(A+1))}function c($,_){_.write($.read(38))}function T($,_){var A;do{A=$.readByte();_.writeByte(A)}while(A!==S.TagOpenbrace);while((A=$.readByte())!==S.TagClosebrace)K($,_,A);_.writeByte(A)}function I($){Object.defineProperties(this,{stream:{value:$},readRaw:{value:function(){return o($)}}})}g.hprose.RawReader=I;var P=Object.create(null,{set:{value:function(){}},read:{value:function(){n(S.TagRef)}},reset:{value:function(){}}});function j(){Object.defineProperties(this,{ref:{value:[]}})}Object.defineProperties(j.prototype,{set:{value:function($){this.ref.push($)}},read:{value:function($){return this.ref[$]}},reset:{value:function(){this.ref.length=0}}});function C(){return new j()}function D($){var A=g,_=$.split("."),B;for(B=0;B<_.length;B++){A=A[_[B]];if(A===i)return null}return A}function W(G,C,E,$){if(E<C.length){var A=C[E];G[A]=$;var H=W(G,C,E+1,".");if(E+1<C.length)if(H===null)H=W(G,C,E+1,"_");return H}var _=G.join("");try{var F=D(_);return((typeof(F)==="function")?F:null)}catch(B){return null}}function _(_){var C=$.getClass(_);if(C)return C;C=D(_);if(typeof(C)==="function"){$.register(C,_);return C}var B=[],A=_.indexOf("_");while(A>=0){B[B.length]=A;A=_.indexOf("_",A+1)}if(B.length>0){var E=_.split("");C=W(E,B,0,".");if(C===null)C=W(E,B,0,"_");if(typeof(C)==="function"){$.register(C,_);return C}}C=function(){};Object.defineProperty(C.prototype,"getClassName",{value:function(){return _}});$.register(C,_);return C}function R(_,A){var $=_.readUntil(A);if($.length===0)return 0;return parseInt($,10)}function A(_){var $=_.stream,A=$.readByte();switch(A){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return A-48;case S.TagInteger:return b($);case S.TagLong:return Q($);case S.TagDouble:return a($);case S.TagNull:return null;case S.TagEmpty:return"";case S.TagTrue:return true;case S.TagFalse:return false;case S.TagNaN:return NaN;case S.TagInfinity:return w($);case S.TagDate:return k(_);case S.TagTime:return t(_);case S.TagBytes:return E(_);case S.TagUTF8Char:return d(_);case S.TagString:return A0(_);case S.TagGuid:return q(_);case S.TagList:return J(_);case S.TagMap:return _.useHarmonyMap?V(_):p(_);case S.TagClass:N(_);return X(_);case S.TagObject:return x(_);case S.TagRef:return y(_);case S.TagError:throw new Error(r(_));default:n(A)}}function b($){return R($,S.TagSemicolon)}function s($){var _=$.readByte();switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return _-48;case S.TagInteger:return b($);default:n(_)}}function Q(_){var $=_.readUntil(S.TagSemicolon),A=parseInt($,10);if(A.toString()===$)return A;return $}function v($){var _=$.readByte();switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return _-48;case S.TagInteger:case S.TagLong:return Q($);default:n(_)}}function a($){return parseFloat($.readUntil(S.TagSemicolon))}function m($){var _=$.readByte();switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return _-48;case S.TagInteger:case S.TagLong:case S.TagDouble:return a($);case S.TagNaN:return NaN;case S.TagInfinity:return w($);default:n(_)}}function w($){return(($.readByte()===S.TagNeg)?-Infinity:Infinity)}function $0($){var _=$.readByte();switch(_){case S.TagTrue:return true;case S.TagFalse:return false;default:n(_)}}function k(D){var B=D.stream,C=parseInt(B.readAsciiString(4),10),_=parseInt(B.readAsciiString(2),10)-1,G=parseInt(B.readAsciiString(2),10),$,F=B.readByte();if(F===S.TagTime){var A=parseInt(B.readAsciiString(2),10),H=parseInt(B.readAsciiString(2),10),I=parseInt(B.readAsciiString(2),10),E=0;F=B.readByte();if(F===S.TagPoint){E=parseInt(B.readAsciiString(3),10);F=B.readByte();if((F>=48)&&(F<=57)){B.skip(2);F=B.readByte();if((F>=48)&&(F<=57)){B.skip(2);F=B.readByte()}}}if(F===S.TagUTC)$=new Date(Date.UTC(C,_,G,A,H,I,E));else $=new Date(C,_,G,A,H,I,E)}else if(F===S.TagUTC)$=new Date(Date.UTC(C,_,G));else $=new Date(C,_,G);D.refer.set($);return $}function U($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagDate:return k($);case S.TagRef:return y($);default:n(_)}}function t(A){var _=A.stream,C,$=parseInt(_.readAsciiString(2),10),E=parseInt(_.readAsciiString(2),10),F=parseInt(_.readAsciiString(2),10),B=0,D=_.readByte();if(D===S.TagPoint){B=parseInt(_.readAsciiString(3),10);D=_.readByte();if((D>=48)&&(D<=57)){_.skip(2);D=_.readByte();if((D>=48)&&(D<=57)){_.skip(2);D=_.readByte()}}}if(D===S.TagUTC)C=new Date(Date.UTC(1970,0,1,$,E,F,B));else C=new Date(1970,0,1,$,E,F,B);A.refer.set(C);return C}function e($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagTime:return t($);case S.TagRef:return y($);default:n(_)}}function E(_){var $=_.stream,B=R($,S.TagQuote),A=$.read(B);$.skip(1);_.refer.set(A);return A}function z($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagEmpty:return new Uint8Array(0);case S.TagBytes:return E($);case S.TagRef:return y($);default:n(_)}}function d($){return $.stream.readString(1)}function u(A){var _=A.stream,$=_.readString(R(_,S.TagQuote));_.skip(1);return $}function A0(_){var $=u(_);_.refer.set($);return $}function r($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagEmpty:return"";case S.TagUTF8Char:return d($);case S.TagString:return A0($);case S.TagRef:return y($);default:n(_)}}function q(A){var _=A.stream;_.skip(1);var $=_.readAsciiString(36);_.skip(1);A.refer.set($);return $}function _0($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagGuid:return q($);case S.TagRef:return y($);default:n(_)}}function J(_){var $=_.stream,D=[];_.refer.set(D);var B=R($,S.TagOpenbrace);for(var C=0;C<B;C++)D[C]=A(_);$.skip(1);return D}function O($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagList:return J($);case S.TagRef:return y($);default:n(_)}}function p(_){var $=_.stream,D={};_.refer.set(D);var B=R($,S.TagOpenbrace);for(var C=0;C<B;C++){var F=A(_),E=A(_);D[F]=E}$.skip(1);return D}function F($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagMap:return p($);case S.TagRef:return y($);default:n(_)}}function V(_){var $=_.stream,D=new Z();_.refer.set(D);var B=R($,S.TagOpenbrace);for(var C=0;C<B;C++){var F=A(_),E=A(_);D.set(F,E)}$.skip(1);return D}function B($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagMap:return V($);case S.TagRef:return y($);default:n(_)}}function x(_){var $=_.stream,D=_.classref[R($,S.TagOpenbrace)],B=new D.classname();_.refer.set(B);for(var C=0;C<D.count;C++)B[D.fields[C]]=A(_);$.skip(1);return B}function X($){var _=$.stream.readByte();switch(_){case S.TagNull:return null;case S.TagClass:N($);return X($);case S.TagObject:return x($);case S.TagRef:return y($);default:n(_)}}function N(B){var A=B.stream,$=u(B),C=R(A,S.TagOpenbrace),E=[];for(var D=0;D<C;D++)E[D]=r(B);A.skip(1);$=_($);B.classref.push({classname:$,count:C,fields:E})}function y($){return $.refer.read(R($.stream,S.TagSemicolon))}function f(_,A,$){I.call(this,_);this.useHarmonyMap=!!$;Object.defineProperties(this,{classref:{value:[]},refer:{value:A?P:C()}})}f.prototype=Object.create(I.prototype);f.prototype.constructor=f;Object.defineProperties(f.prototype,{useHarmonyMap:{value:false,writable:true},checkTag:{value:function($,_){if(_===i)_=this.stream.readByte();if(_!==$)n(_,$)}},checkTags:{value:function($,_){if(_===i)_=this.stream.readByte();if($.indexOf(_)>=0)return _;n(_,$)}},unserialize:{value:function(){return A(this)}},readInteger:{value:function(){return s(this.stream)}},readLong:{value:function(){return v(this.stream)}},readDouble:{value:function(){return m(this.stream)}},readBoolean:{value:function(){return $0(this.stream)}},readDateWithoutTag:{value:function(){return k(this)}},readDate:{value:function(){return U(this)}},readTimeWithoutTag:{value:function(){return t(this)}},readTime:{value:function(){return e(this)}},readBytesWithoutTag:{value:function(){return E(this)}},readBytes:{value:function(){return z(this)}},readStringWithoutTag:{value:function(){return A0(this)}},readString:{value:function(){return r(this)}},readGuidWithoutTag:{value:function(){return q(this)}},readGuid:{value:function(){return _0(this)}},readListWithoutTag:{value:function(){return J(this)}},readList:{value:function(){return O(this)}},readMapWithoutTag:{value:function(){return p(this)}},readMap:{value:function(){return F(this)}},readHarmonyMapWithoutTag:{value:function(){return V(this)}},readHarmonyMap:{value:function(){return B(this)}},readObjectWithoutTag:{value:function(){return x(this)}},readObject:{value:function(){return X(this)}},reset:{value:function(){this.classref.length=0;this.refer.reset()}}});g.hprose.Reader=f}(function(){return this||(1,eval)("this")}()));(function(C){"use strict";var A=C.hprose.BytesIO,D=C.hprose.Writer,B=C.hprose.Reader;function $(C,_){var $=new A(),B=new D($,_);B.serialize(C);return $}function _(_,C,$){if(!(_ instanceof A))_=new A(_);return new B(_,C,$).unserialize()}C.hprose.Formatter={serialize:function(A,_){return $(A,_).bytes},unserialize:_};C.hprose.serialize=$;C.hprose.unserialize=_}(function(){return this||(1,eval)("this")}()));(function(A,C){"use strict";var B=A.setImmediate,Q=A.hprose.Tags,J=A.hprose.ResultMode,H=A.hprose.BytesIO,R=A.hprose.Writer,_=A.hprose.Reader,L=A.hprose.Future,G=Function.prototype.call.bind(Array.prototype.slice),N=new Uint8Array(1);N[0]=Q.TagEnd;function E(){}var F="boolean",D="string",$="number",I="function",O="object",K="undefined";function P(C0,P){var K,B0=false,J0=false,b=30000,m=10,X=false,a=E,c=[],Y=false,z=[],h=new L(),E0=Object.create(null),n=null,K0=this;function S(D,A,_){var $=D.data,B={client:K0,userdata:{}};for(var C=0,E=c.length;C<E;C++)$=c[C].outputFilter($,B);K0.sendAndReceive($,D).then(function($){if(D.oneway)return;for(var _=c.length-1;_>=0;_--)$=c[_].inputFilter($,B);return $}).then(A,function($){if(x(D,A,_))return;_($)})}function x(C,_,$){if(C.idempotent)if(--C.retry>=0){var B=(10-C.retry)*500;if(C.retry>10)B=500;A.setTimeout(function(){S(C,_,$)},B);return true}return false}function I0(A){var B={data:N,retry:m,idempotent:true,timeout:b,},$=function($){var G=null;try{var C=new H($),E=new _(C,true),F=C.readByte();switch(F){case Q.TagError:G=new Error(E.readString());break;case Q.TagFunctions:var B=E.readList();E.checkTag(Q.TagEnd);k(A,B);break;default:G=new Error("Wrong Response:\r\n"+H.toString($));break}}catch(D){G=D}if(G!==null)h.reject(G);else h.resolve(A)};S(B,$,h.reject)}function i(_,$){return L.wrap(function(){return H0(_,$,G(arguments))})}function q(A,$,B,E,_){if($[E]!==C)return;$[E]={};if(typeof(_)===D||_.constructor===Object)_=[_];if(Array.isArray(_))for(var F=0;F<_.length;F++){var G=_[F];if(typeof(G)===D)$[E][G]=i(A,B+E+"_"+G);else for(var H in G)q(A,$[E],E+"_",H,G[H])}}function k(A,$){for(var E=0;E<$.length;E++){var _=$[E];if(typeof(_)===D){if(A[_]===C)A[_]=i(A,_)}else for(var B in _)q(A,A,"",B,_[B])}}function V($,A){var B=Math.min($.length,A.length);for(var _=0;_<B;++_)A[_]=$[_]}function y(_,D){var C=0,E=_.length;for(;C<E;++C)if(typeof _[C]===I)break;if(C===E)return;var A=_.splice(C,E-C);D.onsuccess=A[0];E=A.length;for(C=1;C<E;++C){var B=A[C];switch(typeof B){case I:D.onerror=B;break;case F:D.byref=B;break;case $:D.mode=B;break;case O:for(var G in B)if(G in D)D[G]=B[G];break}}}function H0(P,M,I){var O=new L(),N,G={mode:J.Normal,byref:B0,simple:J0,timeout:b,retry:m,idempotent:false,oneway:false,onsuccess:C,onerror:C,useHarmonyMap:X};if(!Y&&!z.length||Y){if(M in P){var A=P[M];for(var W in A)if(W in G)G[W]=A[W]}y(I,G);if(Y)if(G.mode===J.RawWithEndTag)throw new Error("ResultMode.RawWithEndTag doesn't support in batch mode.");else if(G.mode===J.Raw)throw new Error("ResultMode.Raw doesn't support in batch mode.");N=new H();N.writeByte(Q.TagCall);var T=new R(N,G.simple);T.writeString(M);if(I.length>0||G.byref){T.reset();T.writeList(I);if(G.byref)T.writeBoolean(true)}if(Y)z.push({args:I,func:M,data:N.bytes,env:G,future:O});else N.writeByte(Q.TagEnd)}if(!Y){var U=z.length,E=!!U,$=new H();if(E){for(var F=0;F<U;++F){$.write(z[F].data);delete z[F].data}$.writeByte(Q.TagEnd)}else $=N;var K=z;z=[];G.data=$.bytes;var D=function(N){if(G.oneway){O.resolve();if(G.onsuccess)G.onsuccess(C,I);return}var $=null,T=null,R;if(G.mode===J.RawWithEndTag)$=N;else if(G.mode===J.Raw)$=N.subarray(0,N.byteLength-1);else{var F=new H(N),P=new _(F,false,G.useHarmonyMap),S;R=-1;try{while((S=F.readByte())!==Q.TagEnd)switch(S){case Q.TagResult:var A=G.mode;if(E)A=K[R+1].env.mode;if(A===J.Serialized)$=P.readRaw();else{P.reset();$=P.unserialize()}if(E){K[++R].result=$;K[R].error=null}break;case Q.TagArgument:P.reset();var D=P.readList();if(E)V(D,K[R].args);else V(D,I);break;case Q.TagError:P.reset();T=new Error(P.readString());if(E)K[++R].error=T;break;default:T=new Error("Wrong Response:\r\n"+H.toString(N));if(E)K[++R].error=T;break}}catch(L){T=L;if(E)K[R<0?0:R>=U?R-1:R].error=T}}if(!E){U=1;K=[{args:I,func:M,env:G,result:$,error:T,future:O}]}for(R=0;R<U;++R){var B=K[R];if(B.error){B.future.reject(B.error);if(B.env.onerror)B.env.onerror(B.func,B.error);else a(B.func,B.error)}else{B.future.resolve(B.result);if(B.env.onsuccess)B.env.onsuccess(B.result,B.args)}}},B=function($){O.reject($);if(G.onerror)G.onerror(M,$);else a(M,$)};S(G,D,B)}return O}function _0(){return a}function D0($){if(typeof($)===I)a=$}function p(){return K}function w(){return b}function G0($){if(typeof($)==="number")b=$|0;else b=0}function $0(){return m}function r($){if(typeof($)==="number")m=$|0;else m=0}function o(){return B0}function g($){B0=!!$}function M(){return J0}function L0($){J0=!!$}function M0(){return X}function e($){X=!!$}function F0(){if(c.length===0)return null;return c[0]}function f($){c.length=0;if($&&typeof $.inputFilter==="function"&&typeof $.outputFilter==="function")c.push($)}function l($){if($&&typeof $.inputFilter==="function"&&typeof $.outputFilter==="function")c.push($)}function s($){var _=c.indexOf($);if(_===-1)return false;c.splice(_,1);return true}function W(E,$,A){if(A===C){if(typeof($)===F){A=$;$=false}if(!$)if(typeof(E)===F){A=E;E=false}else if(E&&E.constructor===Object||Array.isArray(E)){$=E;E=false}}var _=K0;if(A)_={};if(!E&&!K)return new Error("You should set server uri first!");if(E)K=E;if(typeof($)===D||($&&$.constructor===Object))$=[$];if(!Array.isArray($)){B(I0,_);return h}k(_,$);h.resolve(_);return _}function T(){var $=G(arguments),_=$.shift();return H0(K0,_,$)}function j(){Y=true}function d(){Y=false;if(z.length)H0()}function v(_,$){return h.then(_,$)}function u(_,B,A){if(E0[_]){var $=E0[_];if($[B])return $[B];return null}if(A)E0[_]=Object.create(null);return null}function A0($,E,_){if(typeof $!==D)throw new TypeError("topic name must be a string.");if(E===C||E===null)if(typeof _===I)E=_;else throw new TypeError("callback must be a function.");if(typeof E===I){_=E;if(n===null)n=T("#");n.then(function(A){A0($,A,_)});return}if(typeof _!==I)throw new TypeError("callback must be a function.");if(L.isPromise(E)){E.then(function(A){A0($,A,_)});return}var A=u($,E,true);if(A===null){A={handler:function(_){var A=u($,E,false);if(A){if(_!==null){var C=A.callbacks;for(var D=0,F=C.length;D<F;++D)C[D](_)}if(u($,E,false)!==null){var G=function(){T($,E,A.handler,function(){B(G)})};B(G)}}},callbacks:[_]};E0[$][E]=A;var F=function(){T($,E,A.handler,function(){B(F)})};F()}else if(A.callbacks.indexOf(_)<0)A.callbacks.push(_)}function U(_,D,A){if(_)if(typeof A===I){var B=_[D];if(B){var C=B.callbacks,$=C.indexOf(A);if($>=0){C[$]=C[C.length-1];C.length--}if(C.length===0)delete _[D]}}else delete _[D]}function Z(_,B,A){if(typeof _!==D)throw new TypeError("topic name must be a string.");if(B===C||B===null)if(typeof A===I)B=A;else{delete E0[_];return}if(typeof B===I){A=B;B=null}if(B===null){if(n===null){if(E0[_]){var $=E0[_];for(B in $)U($,B,A)}}else n.then(function($){Z(_,$,A)})}else if(L.isPromise(B))B.then(function($){Z(_,$,A)});else U(E0[_],B,A)}function t(){return n}if(typeof(C0)===D)W(C0,P);Object.defineProperties(this,{onError:{get:_0,set:D0},onerror:{get:_0,set:D0},uri:{get:p},id:{get:t},timeout:{get:w,set:G0},retry:{get:$0,set:r},byref:{get:o,set:g},simple:{get:M,set:L0},useHarmonyMap:{get:M0,set:e},filter:{get:F0,set:f},addFilter:{value:l},removeFilter:{value:s},useService:{value:W},invoke:{value:T},beginBatch:{value:j},endBatch:{value:d},ready:{value:v},subscribe:{value:A0},unsubscribe:{value:Z}})}function M(B,$){var _=document.createElement("a");_.href=B;if(_.protocol==="http:"||_.protocol==="https:")return new A.hprose.HttpClient(B,$);if(_.protocol==="ws:"||_.protocol==="wss:")return new A.hprose.WebSocketClient(B,$);throw new Error("The "+_.protocol+" client isn't implemented.")}Object.defineProperty(P,"create",{value:M});A.hprose.Client=P}(function(){return this||(1,eval)("this")}()));(function(C,E){"use strict";var D=C.hprose.Client,A=C.hprose.Future;function $(){}function _(K,F){if(this.constructor!==_)return new _(K,F);D.call(this,K,F);var H=Object.create(null),B=$,O=$,P=this;function Q(_,D){var A=new XMLHttpRequest();A.open("POST",P.uri,true);if(C.location!==E&&C.location.protocol!=="file:")A.withCredentials="true";A.responseType="arraybuffer";for(var F in H)A.setRequestHeader(F,H[F]);A.onload=function(){A.onload=$;if(A.status)if(A.status===200)D.resolve(new Uint8Array(A.response));else D.reject(new Error(A.status+":"+A.statusText))};A.onerror=function(){D.reject(new Error("error"))};if(A.upload!==E)A.upload.onprogress=B;A.onprogress=O;if(_.constructor===String||ArrayBuffer.isView)A.send(_);else if(_.buffer.slice)A.send(_.buffer.slice(0,_.length));else A.send(_.buffer);return A}function I(_,D){var C=new A(),B=Q(_,C);if(D.timeout>0)C=C.timeout(D.timeout).catchError(function(_){B.onload=$;B.onerror=$;B.abort();throw _},function($){return $ instanceof TimeoutError});if(D.oneway)C.resolve();return C}function J($){if(typeof($)==="function")B=$}function G(){return B}function M($){if(typeof($)==="function")O=$}function N(){return O}function L($,_){if($.toLowerCase()!=="content-type"&&$.toLowerCase()!=="content-length")if(_)H[$]=_;else delete H[$]}Object.defineProperties(this,{onProgress:{get:G,set:J},onprogress:{get:G,set:J},onRequestProgress:{get:G,set:J},onResponseProgress:{get:N,set:M},setHeader:{value:L},sendAndReceive:{value:I}})}function B(B,$){var A=document.createElement("a");A.href=B;if(A.protocol==="http:"||A.protocol==="https:")return new _(B,$);throw new Error("This client desn't support "+A.protocol+" scheme.")}Object.defineProperty(_,"create",{value:B});C.hprose.HttpClient=_}(function(){return this||(1,eval)("this")}()));(function(C,F){"use strict";var D=C.hprose.Client,_=C.hprose.BytesIO,A=C.hprose.Future;function $(){}function E(K,B){if(this.constructor!==E)return new E(K,B);D.call(this,K,B);this.timeout=0;var S=0,M=0,R=[],C=true,N=null,T=null,Q=this;function O(){return(S<2147483647)?++S:S=0}function U(B,$){var A=new _();A.writeInt32BE(B);if($.constructor===String)A.writeString($);else A.write($);var C=A.bytes;if(ArrayBuffer.isView)T.send(C);else if(C.buffer.slice)T.send(C.buffer.slice(0,C.length));else T.send(C.buffer)}function G($){N.resolve($)}function L($){var A=new _($.data),D=A.readInt32BE(),B=R[D];delete R[D];if(B!==F){--M;B.resolve(A.read(A.length-4))}if(M===0)if(!C)V()}function P($){R.forEach(function(_,A){_.reject(new Error($.code+":"+$.reason));delete R[A]});M=0;T=null}function W(){N=new A();T=new WebSocket(Q.uri);T.binaryType="arraybuffer";T.onopen=G;T.onmessage=L;T.onerror=$;T.onclose=P}function H($,C){if(T===null||T.readyState===WebSocket.CLOSING||T.readyState===WebSocket.CLOSED)W();++M;var B=O(),_=new A();R[B]=_;N.then(function(){U(B,$)});if(Q.timeout>0)_=_.timeout(Q.timeout).catchError(function($){delete R[B];--M;throw $},function($){return $ instanceof TimeoutError});if(C.oneway)_.resolve();return _}function V(){if(T!==null){T.onopen=$;T.onmessage=$;T.onclose=$;T.close()}}function I($){C=!!$}function J(){return C}Object.defineProperties(this,{sendAndReceive:{value:H},keepAlive:{get:J,set:I},close:{value:V}})}function B(A,$){var _=document.createElement("a");_.href=A;if(_.protocol==="ws:"||_.protocol==="wss:")return new E(A,$);throw new Error("This client desn't support "+_.protocol+" scheme.")}Object.defineProperty(E,"create",{value:B});C.hprose.WebSocketClient=E}(function(){return this||(1,eval)("this")}()));(function(E){"use strict";var F=E.hprose.Tags,A=E.hprose.BytesIO,G=E.hprose.Writer,D=E.hprose.Reader,$=1;function B($){this.version=$||"2.0"}B.prototype.inputFilter=function _($,D){var E=A.toString($);if(E.charAt(0)==="{")E="["+E+"]";var H=JSON.parse(E),B=new A(),J=new G(B,true);for(var I=0,K=H.length;I<K;++I){var C=H[I];if(C.error){B.writeByte(F.TagError);J.writeString(C.error.message)}else{B.writeByte(F.TagResult);J.serialize(C.result)}}B.writeByte(F.TagEnd);return B.bytes};B.prototype.outputFilter=function C(B,H){var I=[],E=new A(B),G=new D(E,false,false),J=E.readByte();do{var _={};if(J===F.TagCall){_.method=G.readString();J=E.readByte();if(J===F.TagList){_.params=G.readListWithoutTag();J=E.readByte()}if(J===F.TagTrue)J=E.readByte()}if(this.version==="1.1")_.version="1.1";else if(this.version==="2.0")_.jsonrpc="2.0";_.id=$++;I.push(_)}while(J===F.TagCall);if(I.length>1)return JSON.stringify(I);return JSON.stringify(I[0])};E.hprose.JSONRPCClientFilter=B}(function(){return this||(1,eval)("this")}()));(function($){"use strict";$.hprose.common={Completer:$.hprose.Completer,Future:$.hprose.Future,ResultMode:$.hprose.ResultMode};$.hprose.io={BytesIO:$.hprose.BytesIO,ClassManager:$.hprose.ClassManager,Tags:$.hprose.Tags,RawReader:$.hprose.RawReader,Reader:$.hprose.Reader,Writer:$.hprose.Writer,Formatter:$.hprose.Formatter};$.hprose.client={Client:$.hprose.Client,HttpClient:$.hprose.HttpClient,WebSocketClient:$.hprose.WebSocketClient};$.hprose.filter={JSONRPCClientFilter:$.hprose.JSONRPCClientFilter};if(typeof define==="function")if(define.cmd)define("hprose",[],$.hprose);else if(define.amd)define("hprose",[],function(){return $.hprose});if(typeof module==="object"&&typeof module.exports==="object")module.exports=$.hprose}(function(){return this||(1,eval)("this")}()))